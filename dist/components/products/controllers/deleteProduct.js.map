{"version":3,"file":"deleteProduct.js","sourceRoot":"src/","sources":["components/products/controllers/deleteProduct.ts"],"names":[],"mappings":";;;;;;;;;;;AAIA,oDAAsD;AACtD,sDAAyD;AACzD,oEAA+D;AAG/D,SAAe,aAAa,CAAC,GAAa,EAAE,GAAa;;QACvD,MAAM,EAAE,SAAS,EAAE,GAAwC,GAAG,CAAC,MAAM,CAAC;QAEtE,MAAM,EAAE,IAAI,EAAE,GAAG,GAAG,CAAC;QACrB,MAAM,IAAA,sBAAY,EAAC,GAAS,EAAE;YAC5B,MAAM,aAAa,GAAG,MAAM,iBAAM,CAAC,OAAO,CAAC,SAAS,CAAC;gBACnD,KAAK,EAAE,EAAE,MAAM,EAAE,IAAI,CAAC,EAAE,EAAE,EAAE,EAAE,SAAS,EAAE;aAC1C,CAAC,CAAC;YACH,IAAI,CAAC,aAAa,EAAE,CAAC;gBACnB,OAAO,IAAA,yBAAc,EAAC;oBACpB,GAAG;oBACH,OAAO,EAAE,8BAA8B;oBACvC,MAAM,EAAE,GAAG;iBACZ,CAAC,CAAC;YACL,CAAC;YAED,MAAM,iBAAM,CAAC,OAAO,CAAC,MAAM,CAAC;gBAC1B,KAAK,EAAE,EAAE,EAAE,EAAE,SAAS,EAAE,MAAM,EAAE,IAAI,CAAC,EAAE,EAAE;aAC1C,CAAC,CAAC;YAEH,OAAO,IAAA,yBAAc,EAAC,EAAE,GAAG,EAAE,OAAO,EAAE,8BAA8B,EAAE,CAAC,CAAC;QAC1E,CAAC,CAAA,EAAE,GAAG,CAAC,CAAC;IACV,CAAC;CAAA;AAED,kBAAe,aAAa,CAAC","sourcesContent":["import { Response } from \"express\";\nimport z from \"zod\";\n\nimport { IRequest } from \"../../../utils/types\";\nimport { asyncWrapper } from \"../../../utils/helpers\";\nimport { handleResponse } from \"../../../utils/response\";\nimport { prisma } from \"../../../configs/persistence/database\";\nimport { deleteProductSchema } from \"../product.validations\";\n\nasync function deleteProduct(req: IRequest, res: Response) {\n  const { productId }: z.infer<typeof deleteProductSchema> = req.params;\n\n  const { user } = req;\n  await asyncWrapper(async () => {\n    const productExists = await prisma.product.findFirst({\n      where: { userId: user.id, id: productId },\n    });\n    if (!productExists) {\n      return handleResponse({\n        res,\n        message: \"this product does not exists\",\n        status: 400,\n      });\n    }\n\n    await prisma.product.delete({\n      where: { id: productId, userId: user.id },\n    });\n\n    return handleResponse({ res, message: \"product deleted successfully\" });\n  }, res);\n}\n\nexport default deleteProduct;\n"]}